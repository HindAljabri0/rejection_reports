<div class="mainPage">
    <div class="row" style="padding: 1%;">
        <div class="col-md-12">
            <div class="card " style="width: 100%; width: inherit; padding: 0px; background-color: #F8F7FF; "
                [style.height]="height">
                <div class="" style="background: white; padding: 10px 20px;  ">
                    <div class="menuContent">
                        <div class="searchByDate" *ngIf="paymentReference == null">
                            <mat-form-field floatLabel="never" 
                                style="margin-right: 5%; width: 15%;" >
                                <mat-label>Select Report</mat-label>
                                <mat-select [formControl]="reportTypeControl" (selectionChange)="searchSelect($event)" required>
                                    <mat-option *ngFor="let report of reports" [value]="report.id">
                                       {{report.name}}                                    
                                </mat-option>
                                </mat-select>
                                <mat-error *ngIf="reportTypeControl.hasError('required')">Please choose a Report</mat-error>
                            </mat-form-field>
                            <mat-form-field  [ngClass]="{'mat-form-field-invalid':payerIdHasError}" floatLabel="never" 
                                style="margin-right: 5%; width: 15%;">
                                <mat-label>Select Payer</mat-label>
                                <mat-select [formControl]="payerIdControl" (keyup.enter)="search()" required>
                                    <mat-option *ngFor="let payer of payers" [value]="payer.id">
                                        {{payer.name}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="payerIdControl.hasError('required')">Please choose a Payer</mat-error>
                            </mat-form-field>
                            <mat-form-field [ngClass]="{'mat-form-field-invalid':fromDateHasError}" floatLabel="never" 
                                style="width: 15%;margin-right: 5%;margin-left: 3%;border: none; border-radius: 4px; ">
                                <input matInput [matDatepicker]="fromPicker" placeholder="From Date"
                                    [formControl]="fromDateControl" (keyup.enter)="search()" required>                                    
                                <mat-datepicker-toggle matSuffix [for]="fromPicker">
                                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                </mat-datepicker-toggle>
                                <mat-datepicker #fromPicker></mat-datepicker>
                                <mat-error *ngIf="fromDateControl.hasError('required')">Please choose a Date</mat-error>
                            </mat-form-field>
                            <mat-form-field [ngClass]="{'mat-form-field-invalid':toDateHasError}" floatLabel="never"
                                style="margin-right: 5%;width: 15%;">
                                <input matInput [matDatepicker]="toPicker" placeholder="To Date"
                                    [formControl]="toDateControl" (keyup.enter)="search()" required>
                                <mat-datepicker-toggle matSuffix [for]="toPicker">
                                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                </mat-datepicker-toggle>
                                <mat-datepicker #toPicker></mat-datepicker>
                                <mat-error *ngIf="toDateControl.hasError('required')">Please choose a date</mat-error>
                            </mat-form-field>
                            <mat-form-field [ngClass]="{'mat-form-field-invalid':rejectionCriteriaHasError}" floatLabel="never" 
                                style="margin-right: 5%; width: 15%;" *ngIf="showRejectionReport">
                                <mat-label>Select Date Type</mat-label>
                                <mat-select [formControl]="rejectionCriteriaControl" (keyup.enter)="search()" required>
                                    <mat-option *ngFor="let criteria of criterias" [value]="criteria.id">
                                        {{criteria.name}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="rejectionCriteriaControl.hasError('required')">Please choose date type</mat-error>
                            </mat-form-field>

                            <button mat-raised-button color="primary" (click)="search()" 
                                style="width: 15%;">Search
                            </button>
                        </div>
                        <div *ngIf="paymentReference != null" style="color: #3060AA; width: 100%;">
                            <button mat-icon-button (click)="backButton()" style="background-color: #EFF5FF;">
                                <mat-icon>keyboard_backspace</mat-icon>
                            </button> Payment Report
                            <span style="margin-left: 10%;">Payment Ref. No. <span
                                    style="background-color: #EFF5FF; padding: 5px; border-radius: 5px; width: 10%;">{{paymentReference}}</span></span>
                            <span class="downloadIcon" style="border-radius: 6px; padding: 4px 10px; float: right;">
                                <mat-icon _ngcontent-wxe-c14="" aria-hidden="false" aria-label="Download"
                                    (click)="download()" class="mat-icon notranslate material-icons mat-icon-no-color"
                                    role="img" matTooltip="Download"
                                    style="font-size: large;font-weight: 800; text-align: center; margin-top: 2px; cursor: pointer;">
                                    {{downloadIcon}}</mat-icon>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="card-body ">
                    <app-payment-reference-report #paymentSearchResult [ngClass]="{'hidden':paymentReference != null}"
                        *ngIf="showPaymentSearch" [providerId]="providerId" [from]="fromDate" [to]="toDate"
                        [payerId]="payerIdControl.value" [queryPage]="page" [pageSize]="pageSize"
                        (onPaymentClick)="onPaymentClick($event)" (onPaginationChange)="paginationChange($event)">
                    </app-payment-reference-report>
                    <app-payment-claim-summary-report #paymentClaimSummaryReport
                        [ngClass]="{'hidden':paymentReference == null}" [providerId]="providerId"
                        [paymentReference]="pRef" [page]="page" [pageSize]="pageSize"
                        (onPaginationChange)="paginationChange($event)">
                    </app-payment-claim-summary-report>

                    <app-submitted-invoices #submittedInvoicesSearchResult 
                    [ngClass]="{'hidden':paymentReference != null && showSubmittedInvoicesSearch}"
                        *ngIf="showSubmittedInvoicesSearch" [providerId]="providerId" [from]="fromDate" [to]="toDate"
                        [payerId]="payerIdControl.value" [queryPage]="page" [pageSize]="pageSize"
                        (onPaymentClick)="onPaymentClick($event)" (onPaginationChange)="paginationChange($event)" required>
                    </app-submitted-invoices>

                    <app-rejection-report #rejectionReport 
                    [ngClass]="{'hidden':paymentReference != null && showRejectionReport}"
                        *ngIf="showRejectionReport" [providerId]="providerId" [from]="fromDate" [to]="toDate"
                        [payerId]="payerIdControl.value" [criteriaType]="rejectionCriteriaControl.value" [queryPage]="page" [pageSize]="pageSize"
                        (onPaymentClick)="onPaymentClick($event)" (onPaginationChange)="paginationChange($event)">
                    </app-rejection-report>
                    <!-- <p style="color: #001b7d70; margin: 22%;padding-left: 19%;">Search result will be here..</p> -->
                </div>
            </div>
        </div>
    </div>

</div>