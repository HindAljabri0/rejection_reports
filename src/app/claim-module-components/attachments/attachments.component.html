<div class="parent">
    <main>

        <div class="attachment" *ngFor="let attachment of attachments; let i = index">
            <div class="thumbnail">
                <img width="60px" class="thumbnailImage" height="60px" *ngIf="!isPdf(attachment)"
                    [src]="getImageOfBlob(attachment)" [alt]="attachment.fileName">
                <img width="60px" class="thumbnailImage" height="60px" *ngIf="isPdf(attachment)"
                    src="assets/pdfIcon.png" [alt]="attachment.fileName">
            </div>
            <div style="margin: auto 5px;">
                <p style="margin: 0px;">{{attachment.fileName}}</p>
                <p style="margin: 0px; padding: 0px 5px; font-size: small;" *ngIf="pageMode == 'VIEW'">
                    {{attachment.fileType}}</p>
                <p style="margin: 0px; padding: 0px 5px; font-size: small; cursor: pointer; border: 1px solid #3076C3; background-color: #EFF5FF;"
                    *ngIf="pageMode != 'VIEW'" [matMenuTriggerFor]="editAttachmentTypeMenu">
                    {{attachment.fileType}}<mat-icon style="font-size: smaller; height: 5px; width: 5px;">
                        keyboard_arrow_down</mat-icon>
                </p>
                <mat-menu #editAttachmentTypeMenu>
                    <div style="padding: 10px;">
                        <label>Edit Attachment Type?</label>
                        <mat-radio-group aria-label="Select an option" [value]="attachment.fileType">
                            <mat-radio-button class="block" (click)="editAttachment('Medical Report', i);"
                                id="MEDICAL_REPORT" value="Medical Report">Medical Report</mat-radio-button>
                            <mat-radio-button class="block" (click)="editAttachment('Iqama/ID copy', i);"
                                id="IQAMA_ID_COPY" value="Iqama/ID copy">Iqama/ID Copy</mat-radio-button>
                            <mat-radio-button class="block" (click)="editAttachment('X-Ray result', i);"
                                id="X_RAY_RESULT" value="X-Ray result">X-Ray Result</mat-radio-button>
                            <mat-radio-button class="block" (click)="editAttachment('Lab Result', i);" id="LAB_RESULT"
                                value="Lab Result">Lab Result</mat-radio-button>
                        </mat-radio-group>
                    </div>
                </mat-menu>
            </div>
            <span class="spacer"></span>
            <a [href]="getImageOfBlob(attachment)" [download]="attachment.fileName" mat-icon-button color="primary"
                style="margin: auto;">
                <mat-icon style="font-size: 20px;">save_alt</mat-icon>
            </a>
            <button mat-icon-button color="warn" *ngIf="pageMode != 'VIEW'" style="margin: auto;"
                (click)="deleteCurrentAttachment(i)">
                <mat-icon style="font-size: 20px;">cancel</mat-icon>
            </button>
        </div>
        <div class="attachment" *ngIf="pageMode != 'VIEW'">
            <button mat-button [matMenuTriggerFor]="attachmentTypeMenu" mat-icon-button mat-icon-button color="primary"
                style="margin: auto">
                <mat-icon>add</mat-icon>
            </button>

            <mat-menu #attachmentTypeMenu="matMenu">
                <div style="padding: 10px;">
                    <label>What Type of Attachment?</label>
                    <mat-radio-group aria-label="Select an option" [value]="fileType">

                        <mat-radio-button class="block" (click)="fileType = 'Medical Report'; fileInput.click()"
                            id="MEDICAL_REPORT" value="MEDICAL_REPORT">Medical Report</mat-radio-button>

                        <mat-radio-button class="block" (click)="fileType = 'Iqama/ID copy'; fileInput.click()"
                            id="IQAMA_ID_COPY" value="IQAMA_ID_COPY">Iqama/ID Copy</mat-radio-button>

                        <mat-radio-button class="block" (click)="fileType = 'X-Ray result'; fileInput.click()"
                            id="X_RAY_RESULT" value="X_RAY_RESULT">X-Ray Result</mat-radio-button>

                        <mat-radio-button class="block" (click)="fileType = 'Lab Result'; fileInput.click()"
                            id="LAB_RESULT" value="LAB_RESULT">Lab Result</mat-radio-button>

                        <input hidden type="file" #fileInput id="file" onclick="this.value = null"
                            (change)="selectFile($event.target.files)"
                            accept="image/png,image/jpeg,image/jpg,image/tiff,image/gif,application/pdf" />
                    </mat-radio-group>
                </div>
            </mat-menu>
        </div>
    </main>
    <footer>
        <div *ngIf="selectFilesError != null" style="color: #c44848;">{{selectFilesError}}</div>
    </footer>
</div>