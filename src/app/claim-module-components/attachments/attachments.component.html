<div class="parent">
    <main>

        <div class="attachment" *ngFor="let attachment of attachments; let i = index">
            <div class="thumbnail">
                <img width="60px" class="thumbnailImage" height="60px" *ngIf="!isPdf(attachment)"
                    [src]="getImageOfBlob(attachment)" [alt]="attachment.fileName">
                <img width="60px" class="thumbnailImage" height="60px" *ngIf="isPdf(attachment)"
                    src="assets/pdfIcon.png" [alt]="attachment.fileName">
            </div>
            <p style="margin: auto 5px">{{attachment.fileName}}</p>
            <span class="spacer"></span>
            <a [href]="getImageOfBlob(attachment)" [download]="attachment.fileName" mat-icon-button color="primary"
                style="margin: auto;">
                <mat-icon style="font-size: 20px;">save_alt</mat-icon>
            </a>
            <button mat-icon-button color="warn" *ngIf="pageMode != 'VIEW'" style="margin: auto;"
                (click)="deleteCurrentAttachment(i)">
                <mat-icon style="font-size: 20px;">cancel</mat-icon>
            </button>
        </div>
        <ng-container *ngFor="let attachment of newAttachmentsPreview; let i = index">
            <div class="attachment" *ngIf="attachment != null">
                <div class="thumbnail">
                    <img width="60px" height="60px" class="thumbnailImage" *ngIf="attachment.src != 'pdf'"
                        [src]="attachment.src" [alt]="attachment.name">
                    <img width="60px" height="60px" class="thumbnailImage" *ngIf="attachment.src == 'pdf'"
                        src="assets/pdfIcon.png" [alt]="attachment.name">
                </div>
                <div class="attachmentInfo">
                    <p style="margin: auto 5px">{{attachment.name}}</p>
                    <span class="spacer"></span>
                    <button mat-icon-button color="warn" style="margin: auto;" (click)="deleteNewAttachment(i)">
                        <mat-icon style="font-size: 20px;">cancel</mat-icon>
                    </button>
                </div>
            </div>
        </ng-container>
        <div class="attachment" *ngIf="pageMode != 'VIEW'">
            <button mat-button [matMenuTriggerFor]="attachmentTypeMenu" mat-icon-button mat-icon-button color="primary"
                style="margin: auto">
                <mat-icon>add</mat-icon>
            </button>

            <mat-menu #attachmentTypeMenu="matMenu">
                <div style="padding: 10px;">
                    <label>What Type of Attachment?</label>
                    <mat-radio-group aria-label="Select an option" [value]="fileType">

                        <mat-radio-button class="block" (click)="fileType = 'Medical Report'; fileInput.click()"
                            id="MEDICAL_REPORT" value="MEDICAL_REPORT">Medical Report</mat-radio-button>

                        <mat-radio-button class="block" (click)="fileType = 'Iqama/ID copy'; fileInput.click()"
                            id="IQAMA_ID_COPY" value="IQAMA_ID_COPY">Iqama/ID Copy</mat-radio-button>

                        <mat-radio-button class="block" (click)="fileType = 'X-Ray result'; fileInput.click()"
                            id="X_RAY_RESULT" value="X_RAY_RESULT">X-Ray Result</mat-radio-button>

                        <mat-radio-button class="block" (click)="fileType = 'Lab Result'; fileInput.click()"
                            id="LAB_RESULT" value="LAB_RESULT">Lab Result</mat-radio-button>

                        <input hidden type="file" #fileInput id="file" onclick="this.value = null"
                            (change)="selectFile($event.target.files)"
                            accept="image/png,image/jpeg,image/jpg,image/tiff,image/gif,application/pdf" />
                    </mat-radio-group>
                </div>
            </mat-menu>
        </div>
    </main>
    <footer>
        <div *ngIf="selectFilesError != null" style="color: #c44848;">{{selectFilesError}}</div>
    </footer>
</div>