<div class="animate__animated animate__faster animate__fadeIn">
    <ng-container *ngIf="!showDetails">
        <div class="block-header has-border">
            <p>Request Eligibility</p>
        </div>
        <div class="block-filter-panel">
            <div class="row small-gutter">
                <div class="col-8">
                    <a routerLink="/nphies/beneficiary" title="Create New Beneficiary"
                        class="primary-link medium d-inline-block mt-1">Create New Beneficiary</a>
                </div>
            </div>
            <div class="separator">Or</div>
            <div class="row small-gutter">
                <div class="col-8">
                    <div class="form-group">
                        <label class="control-label">Select a Beneficiary</label>
                        <input type="text" class="form-control"
                            placeholder="Search for beneficiary by name or document ID..."
                            [formControl]="beneficiarySearchController" [matAutocomplete]="auto"
                            (keyup)="searchBeneficiaries()">
                        <mat-autocomplete #auto="matAutocomplete">
                            <mat-option *ngFor="let beneficiary of beneficiariesSearchResult"
                                (click)="selectBeneficiary(beneficiary)">
                                {{beneficiary.name}} ({{beneficiary.documentId}})
                            </mat-option>
                        </mat-autocomplete>
                    </div>
                </div>
            </div>

        </div>
        <div class="block-filter-panel" *ngIf="selectedBeneficiary != null">
            <div class="row small-gutter">
                <div class="col-4">
                    <div class="form-group">
                        <label class="control-label">Beneficiary</label>
                        <input class="form-control" type="text" disabled
                            [value]="selectedBeneficiary.name + ' (' + selectedBeneficiary.documentId + ')'">
                    </div>
                </div>
                <div class="col-4">
                    <div class="form-group">
                        <label class="control-label">Insurance Plan<span class="asterisk">*</span></label>
                        <mat-form-field class="form-control custom-select-control">
                            <mat-select [value]="selectedPlanId">
                                <mat-option *ngFor="let plan of selectedBeneficiary.plans" [value]="plan.planId">
                                    {{plan.primary? '(Primary) ':''}}Member ID: {{plan.memberCardId}} ({{plan.payerName}}){{isPlanExpired(plan.expiryDate)}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
                <div class="col-4">
                    <div class="form-group">
                        <label class="control-label">Service Date<span class="asterisk">*</span></label>
                        <div class="date-picker">
                            <input [matDatepicker]="serviceDate" class="form-control" placeholder="Select service date">
                            <mat-datepicker-toggle [for]="serviceDate"></mat-datepicker-toggle>
                            <mat-datepicker #serviceDate></mat-datepicker>
                        </div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="form-group">
                        <label class="control-label">To Date</label>
                        <div class="date-picker">
                            <input [matDatepicker]="toDate" class="form-control" placeholder="Select to date">
                            <mat-datepicker-toggle [for]="toDate"></mat-datepicker-toggle>
                            <mat-datepicker #toDate></mat-datepicker>
                        </div>
                    </div>
                </div>
                <div class="col-8">
                    <div class="form-group">
                        <label class="control-label">Purpose<span class="asterisk">*</span></label>
                        <div class="checkbox-group inline">
                            <mat-checkbox color="primary" [value]="1">Benefits</mat-checkbox>
                            <mat-checkbox color="primary" [value]="2">Discovery</mat-checkbox>
                            <mat-checkbox color="primary" [value]="3">Validation</mat-checkbox>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <button type="button" mat-flat-button color="primary" (click)="showDetails=true">Request
                    Eligibility</button>
            </div>
        </div>
    </ng-container>
    <ng-container *ngIf="showDetails">
        <div class="block-header has-border">
            <p>Eligibility - LAV4FIYPZWKS</p>
        </div>
        <div class="bg-white p-14">
            <app-eligibility-details class="d-block mb-14"></app-eligibility-details>
            <button type="button" color="primary" mat-flat-button (click)="showDetails=false">Request New
                Eligibility</button>
        </div>
    </ng-container>
</div>