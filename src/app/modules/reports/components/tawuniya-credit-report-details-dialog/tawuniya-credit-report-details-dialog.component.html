<div class="primary-dialog-header">
    <h5 class="primary-dialog-title">Batch Information</h5>
    <button type="button" (click)="closeDialog()" class="dialog-close" matRipple></button>
</div>
<div class="primary-dialog-body tawuniya-extra-details">
    <div class="inline-loader" *ngIf="isLoading">
        <mat-spinner diameter="48"></mat-spinner>
    </div>
    <mat-accordion [displayMode]="'flat'" [hideToggle]="true"
        *ngIf="this.creditReportDetails != undefined && !isLoading">
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Batch Information
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="row">
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Visit Date</label>
                        <p>{{this.creditReportDetails?.visitDate}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Waseel Batch</label>
                        <p>{{this.creditReportDetails?.waseelBatch}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Invoice Date</label>
                        <p>{{this.creditReportDetails?.invoiceDate}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Batch Reference Number</label>
                        <p>{{this.creditReportDetails?.batchReferenceNumber}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Payer Claim No.</label>
                        <p>{{this.creditReportDetails?.payerClaimNo}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Policy No.</label>
                        <p>{{this.creditReportDetails?.policyNo}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Member ID</label>
                        <p>{{this.creditReportDetails?.memberID}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Patient File No.</label>
                        <p>{{this.creditReportDetails?.patientFileNo}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Physician ID</label>
                        <p>{{this.creditReportDetails?.physicianID}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Physician Name</label>
                        <p>{{this.creditReportDetails?.physicianName}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Invoice No.</label>
                        <p>{{this.creditReportDetails?.invoiceNo}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Member Name</label>
                        <p>{{this.creditReportDetails?.memberName}}</p>
                    </div>
                </div>
            </div>
        </mat-expansion-panel>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Service Information
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="row">
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Serial No</label>
                        <p>{{this.creditReportDetails?.serialNo}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Service Code</label>
                        <p>{{this.creditReportDetails?.serviceCode}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Service Price</label>
                        <p>{{this.creditReportDetails?.servicePrice | currency:' '}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Service Description</label>
                        <p>{{this.creditReportDetails?.serviceDescription}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Exceed Price</label>
                        <p>{{this.creditReportDetails?.exceedPrice | currency:' '}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Patient Share</label>
                        <p>{{this.creditReportDetails?.patientShare | currency:' '}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Requested Net Amount</label>
                        <p>{{this.creditReportDetails?.requestedNetAmount | currency:' '}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Gross Amount</label>
                        <p>{{this.creditReportDetails?.grossAmount | currency:' '}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Received Gross</label>
                        <p>{{this.creditReportDetails?.receivedGross | currency:' '}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Deducted Amount</label>
                        <p>{{this.creditReportDetails?.deductedAmoun | currency:' '}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Received Discount</label>
                        <p>{{this.creditReportDetails?.receivedDiscount | currency:' '}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Payer Discount</label>
                        <p>{{this.creditReportDetails?.payerDiscount | currency:' '}}</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4">
                    <div class="inline-labelled-text">
                        <label>Rejection Reason</label>
                        <p>{{this.creditReportDetails?.rejectionReason}}</p>
                    </div>
                </div>
            </div>
        </mat-expansion-panel>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Diagnosis
                </mat-panel-title>
            </mat-expansion-panel-header>
            <ng-container
                *ngIf="creditReportDetails != null && creditReportDetails.creditReportDetailsICD10List != null">
                <div class="table-responsive"
                    *ngFor="let diagnosis of creditReportDetails.creditReportDetailsICD10List">
                    <table cellpadding="0" cellspacing="0" border="0" class="primary-grid">
                        <thead>
                            <tr>
                                <th>Diagnosis Code</th>
                                <th>Diagnosis Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>{{diagnosis.diagnosisCode}}</td>
                                <td>{{diagnosis.diagnosisDescription}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </ng-container>
        </mat-expansion-panel>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Provider Comment and Attachment
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="row">
                <div class="col-6">
                    <div class="inline-labelled-text">
                        <label>Comment</label>
                        <p>{{this.creditReportDetails?.comment}}</p>
                    </div>
                </div>
                <div class="col-6">
                    <div class="inline-labelled-text">
                        <label>Attachment</label>
                        <div class="attachment" *ngIf="creditReportDetails != null && creditReportDetails.attachment != null">
                            <div class="thumbnail">
                                <img *ngIf="!isPdf()"
                                    [src]="getImageOfBlob()" [alt]="this.creditReportDetails.attachmentName"
                                    (click)="viewAttachment()" style="cursor: pointer;" />
                                <img *ngIf="isPdf()"
                                    src="assets/file-types/ic-pdf.svg" [alt]="this.creditReportDetails.attachmentName"
                                    (click)="viewAttachment()" style="cursor: pointer;" />
                            </div>
                            <div class="content">
                                <p class="title">{{creditReportDetails.attachmentName}}</p>
                                <p>{{creditReportDetails.attachmentType}}</p>
                                <div class="btn-list">
                                    <a [href]="getImageOfBlob()" [download]="creditReportDetails.attachmentName"
                                        mat-icon-button class="text-primary mr-0">
                                        <mat-icon>save_alt</mat-icon>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </mat-expansion-panel>
    </mat-accordion>
    <app-empty-state *ngIf="this.creditReportDetails == undefined && !isLoading" class="claim-list-empty-state"
        message='No {{title}} services found!'>
    </app-empty-state>
</div>