<div class="animate__animated animate__faster animate__fadeIn">
    <div class="block-header has-border">
        <ul class="custom-breadcrumb">
            <li><a routerLink="/reports/creditReports" class="primary-link">Credit Reports</a></li>
            <li class="active">Tawuniya</li>
        </ul>
    </div>
    <div class="credit-report-summary-header">
        <div class="left-block">
            <div class="content">
                <p>Total Rejections</p>
                <strong *ngIf="data != null && data.providercreditReportInformation != null">{{data.providercreditReportInformation.totalrejectionsamount
                    + data.providercreditReportInformation.totaldeductionsamount | currency: ' ' }} SR</strong>
            </div>
        </div>
        <div class="right-block">
            <div class="row small-gutter align-items-end">
                <div class="col-8">
                    <div class="report-progress">
                        <small>Count Down</small>
                        <p class="pb-1">6 Days Left</p>
                        <ul class="progress-steps">
                            <li class="active under-review"></li>
                            <li class="active under-review"></li>
                            <li class="active under-review"></li>
                            <li class="active under-review"></li>
                            <li class="active under-review"></li>
                            <li class="active under-review"></li>
                            <li class="active under-review"></li>
                            <li class="active under-review"></li>
                            <li class="active under-review">
                                <p>Day 9</p>
                            </li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                        </ul>
                    </div>
                </div>
                <div class="col-4">
                    <ul class="legend">
                        <li>
                            <span class="status-ball new"></span>
                            New
                        </li>
                        <li>
                            <span class="status-ball under-submission"></span>
                            Under Submission
                        </li>
                        <li>
                            <span class="status-ball under-review"></span>
                            Under Review
                        </li>
                        <li>
                            <span class="status-ball submitted"></span>
                            Submitted
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="credit-report-summary-body" *ngIf="data != null">
        <div class="left-block">
            <div class="information-block" *ngIf="data.providercreditReportInformation != null">
                <div class="inline-labelled-text">
                    <label>Received Date</label>
                    <p *ngIf="isDate(data.providercreditReportInformation.reportdate)">
                        {{data.providercreditReportInformation.reportdate.toLocaleDateString()}}</p>
                </div>
                <div class="inline-labelled-text">
                    <label>Batch Reference Number</label>
                    <p>{{data.providercreditReportInformation.batchreferenceno}}</p>
                </div>
                <div class="inline-labelled-text">
                    <label>Batch Received Date</label>
                    <p *ngIf="isDate(data.providercreditReportInformation.batchreceiveddate)">
                        {{data.providercreditReportInformation.batchreceiveddate.toLocaleDateString()}}</p>
                </div>
                <div class="inline-labelled-text">
                    <label>Claim Month</label>
                    <p *ngIf="isDate(data.providercreditReportInformation.lossmonth)">
                        {{data.providercreditReportInformation.lossmonth.toLocaleDateString()}}</p>
                </div>
                <div class="inline-labelled-text">
                    <label>Credit Report Status</label>
                    <p>{{data.providercreditReportInformation.status}}</p>
                </div>
                <div class="inline-labelled-text">
                    <label>Provider</label>
                    <p>{{data.providercreditReportInformation.providername}}</p>
                </div>
                <div class="inline-labelled-text">
                    <label>Provider City</label>
                    <p>{{data.providercreditReportInformation.providercity}}</p>
                </div>
                <div class="inline-labelled-text">
                    <label>Plan Name</label>
                    <p>{{data.providercreditReportInformation.planname}}</p>
                </div>
                <div class="inline-labelled-text">
                    <label>Plan Number</label>
                    <p>{{data.providercreditReportInformation.planno}}</p>
                </div>
                <div class="inline-labelled-text">
                    <label>Policy Name</label>
                    <p>{{data.providercreditReportInformation.policyname}}</p>
                </div>
                <div class="inline-labelled-text">
                    <label>Policy Number</label>
                    <p>{{data.providercreditReportInformation.policyno}}</p>
                </div>
            </div>
            <div class="message">
                <mat-icon>info</mat-icon>
                <p>With reference to your Credit Request mentioned above and for a fair, full and final settlement,
                    please be advised of the following</p>
            </div>
            <ul class="information-block no-border" *ngIf="data.providercreditReportInformation != null">
                <li class="semibold">
                    <span>Requested Amount (Net)</span>
                    <p>{{data.providercreditReportInformation.requestedamount | currency: ' '}}</p>
                </li>
                <li>
                    <span>Difference In Discounts</span>
                    <p>{{data.providercreditReportInformation.differenceindiscounts | currency: ' '}}</p>
                </li>
                <li>
                    <span>Difference In Deductible</span>
                    <p>{{data.providercreditReportInformation.differenceindeductibles | currency: ' '}}</p>
                </li>
                <li>
                    <span>Transferred Batch Amount</span>
                    <p>{{data.providercreditReportInformation.transferredbatchamount | currency: ' '}}</p>
                </li>
                <li>
                    <span>Bills Not Recieved</span>
                    <p>{{data.providercreditReportInformation.billsnotreceived | currency: ' '}}</p>
                </li>
                <li>
                    <span>Rejected Claims Amount</span>
                    <p>{{data.providercreditReportInformation.rejectedclaimsamount | currency: ' '}}</p>
                </li>
                <li>
                    <span>Net Deducted Services</span>
                    <p>{{data.providercreditReportInformation.netdeductedservices | currency: ' '}}</p>
                </li>
                <li class="semibold">
                    <span>Total Payable</span>
                    <p>{{data.providercreditReportInformation.totalamountpayable | currency: ' '}}</p>
                </li>
            </ul>
        </div>
        <div class="right-block">
            <mat-tab-group [dynamicHeight]="true" class="primary-tab">
                <mat-tab [label]="'Deducted Services'">
                    <div class="table-responsive">
                        <table class="primary-grid credit-report-details-table" cellpadding="0" cellspacing="0" border="0">
                            <thead>
                                <tr>
                                    <th>
                                        <div class="header-block">
                                            <mat-checkbox class="grid-checkbox" color="primary">Select All
                                            </mat-checkbox>
                                            <div class="right-block btn-list">
                                                <button type="button" class="action-btn" matRipple>Agree</button>
                                                <button type="button" class="action-btn" matRipple>Disagree</button>
                                            </div>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let deductedService of data.detuctedServices">
                                    <td>
                                        <div class="body-block">
                                            <mat-checkbox color="primary" class="grid-checkbox"></mat-checkbox>
                                            <div class="content">
                                                <div class="row">
                                                    <div class="col-lg-8 border-lg-right">
                                                        <div class="row small-gutter">
                                                            <div class="col-3">
                                                                <div class="inline-labelled-text">
                                                                    <label>Waseel Batch</label>
                                                                    <p>{{deductedService.waseelbatch}}</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-3">
                                                                <div class="inline-labelled-text">
                                                                    <label>Doctor Code</label>
                                                                    <p>{{deductedService.physicianid}}</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-3">
                                                                <div class="inline-labelled-text">
                                                                    <label>Claim No</label>
                                                                    <p>{{deductedService.payerclaimno}}</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-3">
                                                                <div class="inline-labelled-text">
                                                                    <label>Provider Ref.</label>
                                                                    <p></p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row small-gutter">
                                                            <div class="col-3">
                                                                <div class="inline-labelled-text">
                                                                    <label>Service Code</label>
                                                                    <p>{{deductedService.servicecode}}</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-6">
                                                                <div class="inline-labelled-text">
                                                                    <label>Service</label>
                                                                    <p>{{deductedService.servicedescription}}</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-3">
                                                                <div class="inline-labelled-text">
                                                                    <label>Rejection Reason</label>
                                                                    <p>{{deductedService.rejectionreason}}</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="text-lg-right">
                                                            <a href="#"
                                                                (click)="openDetailsDialog($event, deductedService.id.batchreferenceno, deductedService.id.serialno, 'deducted')"
                                                                class="primary-link underlined mb-3 mb-lg-0 d-inline-block" title="View Details">View Details</a>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <div class="inline-labelled-text">
                                                            <label>Exceed Price</label>
                                                            <p class="semibold">{{deductedService.exceedprice | currency: ' '}} SR</p>
                                                        </div>
                                                        <div class="inline-labelled-text">
                                                            <label>Deducted Amount</label>
                                                            <p class="semibold">{{deductedService.deductedamount | currency: ' '}} SR
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row small-gutter">
                                                    <div class="col-lg-8">
                                                        <div class="form-group">
                                                            <label class="control-label text-primary">Comments</label>
                                                            <textarea class="form-control comment-box">{{deductedService.comments}}</textarea>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <div class="form-group mb-0">
                                                            <label class="control-label text-primary">Attachment</label>
                                                            <ul class="attachment-list">
                                                                <li matTooltip="Report-4594.pdf">
                                                                    <img src="./assets/file-types/ic-pdf.svg" alt="PDF" />
                                                                    <span>Report-4594.pdf</span>
                                                                </li>
                                                                <li matTooltip="Report-4594.xls">
                                                                    <img src="./assets/file-types/ic-xls.svg" alt="xls" />
                                                                    <span>Report-4594.xls</span>
                                                                </li>
                                                                <li matTooltip="Add Attachments" class="add-block">
                                                                    <div class="file-upload-wrapper text-primary">
                                                                        <div class="content">
                                                                            <mat-icon>add_circle</mat-icon>
                                                                        </div>
                                                                        <input type="file" class="file-upload-control" />
                                                                    </div>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <mat-icon *ngIf="deductedService.agree != null"
                                                [ngClass]="{'text-danger':deductedService.agree =='N', 'text-success': deductedService.agree =='Y'}">
                                                {{deductedService.agree =='N'? 'cancel':'check_circle'}}</mat-icon>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <app-empty-state *ngIf="data.detuctedServices == null || data.detuctedServices.length == 0" class="claim-list-empty-state"
                                        message='No deducted services found!'>
                                    </app-empty-state>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </mat-tab>
                <mat-tab [label]="'Rejected Claims Services'">
                    <div class="table-responsive">
                        <table class="primary-grid credit-report-details-table" cellpadding="0" cellspacing="0" border="0">
                            <thead>
                                <tr>
                                    <th>
                                        <div class="header-block">
                                            <mat-checkbox class="grid-checkbox" color="primary">Select All
                                            </mat-checkbox>
                                            <div class="right-block btn-list">
                                                <button type="button" class="action-btn" matRipple>Agree</button>
                                                <button type="button" class="action-btn" matRipple>Disagree</button>
                                            </div>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let rejectedServices of data.rejectedServices">
                                    <td>
                                        <div class="body-block">
                                            <mat-checkbox color="primary" class="grid-checkbox"></mat-checkbox>
                                            <div class="content">
                                                <div class="row">
                                                    <div class="col-lg-8 border-lg-right">
                                                        <div class="row small-gutter">
                                                            <div class="col-3">
                                                                <div class="inline-labelled-text">
                                                                    <label>Waseel Batch</label>
                                                                    <p>{{rejectedServices.waseelbatch}}</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-3">
                                                                <div class="inline-labelled-text">
                                                                    <label>Doctor Code</label>
                                                                    <p>{{rejectedServices.physicianid}}</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-3">
                                                                <div class="inline-labelled-text">
                                                                    <label>Claim No</label>
                                                                    <p>{{rejectedServices.payerclaimno}}</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-3">
                                                                <div class="inline-labelled-text">
                                                                    <label>Provider Ref.</label>
                                                                    <p></p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row small-gutter">
                                                            <div class="col-3">
                                                                <div class="inline-labelled-text">
                                                                    <label>Service Code</label>
                                                                    <p>{{rejectedServices.servicecode}}</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-6">
                                                                <div class="inline-labelled-text">
                                                                    <label>Service</label>
                                                                    <p>{{rejectedServices.servicedescription}}</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-3">
                                                                <div class="inline-labelled-text">
                                                                    <label>Rejection Reason</label>
                                                                    <p>{{rejectedServices.rejectionreason}}</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="text-lg-right">
                                                            <a href="#"
                                                                (click)="openDetailsDialog($event, rejectedServices.id.batchreferenceno, rejectedServices.id.serialno, 'rejected')"
                                                                class="primary-link underlined mb-3 mb-lg-0 d-inline-block" title="View Details">View Details</a>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <div class="inline-labelled-text">
                                                            <label>Exceed Price</label>
                                                            <p class="semibold">{{rejectedServices.exceedprice | currency: ' '}} SR</p>
                                                        </div>
                                                        <div class="inline-labelled-text">
                                                            <label>Deducted Amount</label>
                                                            <p class="semibold">{{rejectedServices.deductedamount | currency: ' '}} SR
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row small-gutter">
                                                    <div class="col-lg-8">
                                                        <div class="form-group">
                                                            <label class="control-label text-primary">Comments</label>
                                                            <textarea class="form-control comment-box">{{rejectedServices.comments}}</textarea>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <div class="form-group mb-0">
                                                            <label class="control-label text-primary">Attachment</label>
                                                            <ul class="attachment-list">
                                                                <li matTooltip="Report-4594.pdf">
                                                                    <img src="./assets/file-types/ic-pdf.svg" alt="PDF" />
                                                                    <span>Report-4594.pdf</span>
                                                                </li>
                                                                <li matTooltip="Report-4594.xls">
                                                                    <img src="./assets/file-types/ic-xls.svg" alt="xls" />
                                                                    <span>Report-4594.xls</span>
                                                                </li>
                                                                <li matTooltip="Add Attachments" class="add-block">
                                                                    <div class="file-upload-wrapper text-primary">
                                                                        <div class="content">
                                                                            <mat-icon>add_circle</mat-icon>
                                                                        </div>
                                                                        <input type="file" class="file-upload-control" />
                                                                    </div>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <mat-icon *ngIf="rejectedServices.agree != null"
                                                [ngClass]="{'text-danger':rejectedServices.agree =='N', 'text-success': rejectedServices.agree =='Y'}">
                                                {{rejectedServices.agree =='N'? 'cancel':'check_circle'}}</mat-icon>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <app-empty-state *ngIf="data.rejectedServices == null || data.rejectedServices.length == 0" class="claim-list-empty-state"
                                        message='No rejected services found!'>
                                    </app-empty-state>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </mat-tab>
            </mat-tab-group>
        </div>
    </div>
    <div class="block-footer sticky-bottom">
        <div class="left-block custom-paginator">
            <button matRipple type="button" title="First Page">
                <img src="./assets/ic-page-first.svg" alt="First" />
            </button>
            <button matRipple type="button" title="Previous Page">
                <img src="./assets/ic-page-prev.svg" alt="Previous" />
            </button>
            <p class="page-info">
                1<small>/10</small>
            </p>
            <button matRipple type="button" title="Next Page">
                <img src="./assets/ic-page-next.svg" alt="Next" />
            </button>
            <button matRipple type="button" title="Last Page">
                <img src="./assets/ic-page-last.svg" alt="Last" />
            </button>
        </div>
        <div class="btn-list right-block">
            <button type="button" color="primary" mat-flat-button>Submit</button>
        </div>
    </div>
</div>